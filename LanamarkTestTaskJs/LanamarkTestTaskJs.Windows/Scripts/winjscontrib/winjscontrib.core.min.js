/* 
 * WinJS Contrib v2.0.0.6
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

Object.map||(Object.map=function(n,t){var i={};return"object"!=typeof n?i:("function"!=typeof t&&(t=function(n,t){return[n,t]}),Object.keys(n).forEach(function(e){var r=t.apply(n,[e,n[e]]);r&&r.length&&(i[r[0]||e]=r[1])}),i)}),String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return"undefined"!=typeof n[i]?n[i]:t})}),String.prototype.padLeft||(String.prototype.padLeft=function(n,t){return void 0===t&&(t="0"),this.length<n?(t+this).padLeft(n,t):this});var WinJSContrib=WinJSContrib||{};WinJSContrib.UI=WinJSContrib.UI||{},WinJSContrib.UI.Pages=WinJSContrib.UI.Pages||{},WinJSContrib.UI.disableAutoResources=!1,WinJSContrib.Utils=WinJSContrib.Utils||{},WinJSContrib.Promise=WinJSContrib.Promise||{},function(){"use strict";function n(n,t){if(n){if("this"===t)return n;var i=n[t];if("undefined"!=typeof i)return i;var e=t.indexOf("[");if(!(0>e)){var r=t.indexOf("]",e);if(!(0>r)){var o=t.substr(e+1,r-e);return o=parseInt(o),n[o]}}}}function t(n,t,i){if(WinJSContrib.Utils.hasValue(t))return n.setProperty?void n.setProperty(t,i):void(n[t]=i);if("string"==typeof t){var e=t.indexOf("[");if(0>e)return;var r=t.indexOf("]",e);if(0>r)return;var o=t.substr(e+1,r-e);o=parseInt(o),n[o]=i}}function i(n,t,i,e,r,o){var a=(t.querySelectorAll(".mcn-layout-ctrl"),[]);r&&a.push(WinJS.Promise.as(r.apply(n,e)));for(var s=t.querySelectorAll(".mcn-layout-ctrl"),u=0,c=s.length;c>u;){var l=s[u];if(l){var f=l.winControl[i];f&&a.push(WinJS.Promise.as(f.apply(l.winControl,e)))}u+=1}return o&&a.push(WinJS.Promise.as(o.apply(n,e))),WinJS.Promise.join(a)}WinJSContrib.UI.offsetFrom=function(n,t){for(var i=0,e=0,r=n.clientWidth,o=n.clientHeight;n&&n!=t;)i+=n.offsetLeft-n.scrollLeft+n.clientLeft,e+=n.offsetTop-n.scrollTop+n.clientTop,n=n.offsetParent;return{x:i,y:e,width:r,height:o}},WinJSContrib.UI.EventTracker=function(){this.events=[]},WinJSContrib.UI.EventTracker.prototype.addEvent=function(n,t,i,e){var r=this;n.addEventListener(t,i,e);var o=function(){try{n.removeEventListener(t,i);var e=r.events.indexOf(o);e>=0&&r.events.splice(e,1)}catch(a){console.error("unexpected error while releasing callback "+a.message)}};return this.events.push(o),o},WinJSContrib.UI.EventTracker.prototype.addBinding=function(n,t,i){n.bind(t,i);var e=function(){n.unbind(t,i)};return this.events.push(e),e},WinJSContrib.UI.EventTracker.prototype.dispose=function(){for(var n=0;n<this.events.length;n++)this.events[n]();this.events=[]},WinJSContrib.UI.appbarsOpen=function(){var n=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(n&&n.length)for(var t=0;t<n.length;t++)n[t].winControl&&n[t].winControl.show()},WinJSContrib.UI.appbarsClose=function(){var n=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(n&&n.length)for(var t=0;t<n.length;t++)n[t].winControl&&n[t].winControl.hide()},WinJSContrib.UI.appbarsDisable=function(){var n=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(n&&n.length)for(var t=0;t<n.length;t++)n[t].winControl&&(n[t].winControl.disabled=!0)},WinJSContrib.UI.appbarsEnable=function(){$('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]').each(function(){this.winControl&&(this.winControl.disabled=!1)})},WinJSContrib.UI.elementLoaded=function(n,t){return new WinJS.Promise(function(i,e){function r(){n.onload=void 0,n.onerror=void 0,n.onreadystatechange=void 0,e("element not loaded")}function o(){n.onload=void 0,n.onerror=void 0,n.onreadystatechange=void 0,i({element:n,url:t})}n.onerror=r,n.onload=o,n.onreadystatechange=o,n.naturalWidth>0&&o(void 0),n.src=t})},WinJSContrib.UI.loadImage=function(n){return new WinJS.Promise(function(t,i){function e(){o.onload=void 0,o.onerror=void 0,i("image not loaded")}function r(){o.onload=void 0,o.onerror=void 0,t({element:o,url:n})}var o=new Image;o.onerror=e,o.onload=r,o.naturalWidth>0&&r(void 0),o.src=n})},WinJSContrib.UI.listElementsAfterMe=function(n){var t=[],i=!1;if(n.parentElement)for(var e=n.parentElement,r=0;r<e.children.length;r++)e.children[r]===n?i=!0:i&&t.push(e.children[r]);return t},WinJSContrib.UI.removeElementAnimation=function(n){return new WinJS.Promise(function(t){var i=WinJSContrib.UI.listElementsAfterMe(n),e=WinJS.UI.Animation.createDeleteFromListAnimation([n],i);n.style.position="fixed",n.style.opacity="0",e.execute().done(function(){t(n)})})},WinJSContrib.UI.bindPageActions=function(n,t){$("*[data-page-action]",n).each(function(){var n=$(this).addClass("page-action").data("page-action"),i=t[n];i&&"function"==typeof i&&$(this).tap(function(i){var e=$(i).data("page-action-args");if(e&&"string"==typeof e)try{var r=WinJSContrib.Utils.readValue(i,e);e=r?r:JSON.parse(e)}catch(o){return}t[n].bind(t)({elt:i,args:e})})})},WinJSContrib.UI.bindPageLinks=function(n){$("*[data-page-link]",n).each(function(){var n=$(this).addClass("page-link").data("page-link");if(n&&n.indexOf("/")<0){var t=WinJSContrib.Utils.readProperty(window,n);t&&(n=t)}n&&$(this).tap(function(t){var i=$(t).data("page-action-args");if(i&&"string"==typeof i)try{var e=WinJSContrib.Utils.readValue(t,i);i=e?e:JSON.parse(i)}catch(r){return}if(WinJSContrib.UI.parentNavigator&&WinJSContrib.UI.parentNavigator(t)){var o=WinJSContrib.UI.parentNavigator(t);o.navigate(n,i)}else WinJS.Navigation.navigate(n,i)})})},WinJSContrib.UI.bindMembers=function(n,t){$("*[data-page-member]",n).each(function(){var n=$(this).addClass("page-member").data("page-member");n||(n=this.id),n&&!t[n]&&(t[n]=this,this.winControl&&(t[n]=this.winControl))})},WinJSContrib.UI.bindActions=function(n,t){WinJSContrib.UI.bindPageActions(n,t),WinJSContrib.UI.bindPageLinks(n)},WinJSContrib.Promise.waterfall=function(n,t){var i=WinJS.Promise.wrap(),e=[];if(!n)return WinJS.Promise.wrap([]);var r=WinJS.Promise.as(n);return r.then(function(n){for(var r=function(n,i){return n.then(function(){return WinJS.Promise.as(t(i)).then(function(n){e.push(n)})})},o=0,a=n.length;a>o;o++)i=r(i,n[o]);return i.then(function(){return e})})},WinJSContrib.Promise.promises=function(n,t){if(!n)return WinJS.Promise.wrap([]);var i=WinJS.Promise.as(n);return i.then(function(n){for(var i=[],e=0,r=n.length;r>e;e++)i.push(WinJS.Promise.as(t(n[e])));return i})},WinJSContrib.Promise.parallel=function(n,t){if(!n)return WinJS.Promise.wrap([]);var i=WinJS.Promise.as(n);return i.then(function(n){for(var i=[],e=0,r=n.length;r>e;e++)i.push(WinJS.Promise.as(t(n[e])));return WinJS.Promise.join(i)})},WinJSContrib.Promise.batch=function(n,t,i){if(!n)return WinJS.Promise.wrap([]);var e=WinJS.Promise.as(n);return e.then(function(n){for(var e=WinJS.Promise.wrap(),r=[],o=[],a=!1,s=function(n,t){return n.then(function(){return WinJS.Promise.join(t.map(function(n){return WinJS.Promise.as(i(n))})).then(function(n){n=n.concat(n)},function(n){o=o.concat(n),a=!0})})},u=0,c=n.length;c>u;u++)r.push(n[u]),u>0&&u%t==0&&(e=s(e,r),r=[]);return r.length&&(e=s(e,r)),e.then(function(){return a?WinJS.Promise.wrapError(o):o})})},WinJSContrib.Utils.startsWith=function(n,t){if(!t)return!1;var i=n.match("^"+t)==t;return i},String.prototype.startsWith||(String.prototype.startsWith=function(n){return WinJSContrib.Utils.startsWith(this,n)}),WinJSContrib.Utils.endsWith=function(n,t){return t?n.match(t+"$")==t:!1},String.prototype.endsWith||(String.prototype.endsWith=function(n){return WinJSContrib.Utils.endsWith(this,n)}),WinJSContrib.Utils.queryStringFrom=function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t.join("&")},WinJSContrib.Utils.triggerEvent=function(n,t,i,e){var r=document.createEvent("Event");r.initEvent(t,i,e),n.dispatchEvent(r)},WinJSContrib.Utils.triggerCustomEvent=function(n,t,i,e,r){var o=document.createEvent("CustomEvent");o.initCustomEvent(t,i,e,r),n.dispatchEvent(o)},WinJSContrib.Utils.readProperty=function(n,t){if("string"==typeof t&&n[t])return n[t];if(!t||!t.length)return n;var i=WinJSContrib.Utils.getProperty(n,t);return i?i.propValue:void 0},WinJSContrib.Utils.getProperty=function(i,e){"string"==typeof e&&(e=e.split(".")),e&&e.length||(e=["this"]);for(var r=i,o=null,a=0;a<e.length;a++){var s={parent:r,parentDescriptor:o,keyProp:e[a],ensureParent:function(){return r?r:void(this.parentDescriptor&&(this.parentDescriptor.ensureParent(),this.parentDescriptor.parent[this.parentDescriptor.keyProp]||(this.parentDescriptor.parent[this.parentDescriptor.keyProp]={},this.parent=this.parentDescriptor.parent[this.parentDescriptor.keyProp])))},get propValue(){return n(this.parent,this.keyProp)},set propValue(n){return this.ensureParent(),t(this.parent,this.keyProp,n)}};if(o=s,a==e.length-1)return s;r=n(r,e[a])}},WinJSContrib.Utils.writeProperty=function(n,t,i){var e=WinJSContrib.Utils.getProperty(n,t);e&&(e.propValue=i)},WinJSContrib.Utils.randomFromInterval=function(n,t){return Math.random()*(t-n+1)+n<<0},WinJSContrib.Utils.alphabeticSort=function(n,t){return n>t?1:t>n?-1:0},WinJSContrib.Utils.distinctArray=function(n,t,i){if(null==n||0==n.length)return n;"undefined"==typeof i&&(i=!1);var e="",r=0,o=[];if(i)for(var a=0;a<n.length;a++){if(t){var s=WinJSContrib.Utils.readProperty(n[a],t.split(".")),u=s;s||(u=s),s&&s.toLowerCase&&(u=s.toLowerCase())}else var u=n[a];e.indexOf("|"+u+"|")<0&&(e+="|"+u+"|",o[r++]=n[a])}else for(var a=0;a<n.length;a++){if(t)var u=WinJSContrib.Utils.readProperty(n[a],t.split("."));else var u=n[a];e.indexOf("|"+u+"|")<0&&(e+="|"+u+"|",o[r++]=n[a])}return o},WinJSContrib.Utils.getDistinctPropertyValues=function(n,t,i){return Utils.distinctArray(n,t,i).map(function(n){return WinJSContrib.Utils.readProperty(n,t.split("."))})},WinJSContrib.Utils.removeAccents=function(n){var t=n.toLowerCase();return t=t.replace(new RegExp("[àáâãäå]","g"),"a"),t=t.replace(new RegExp("æ","g"),"ae"),t=t.replace(new RegExp("ç","g"),"c"),t=t.replace(new RegExp("[èéêë]","g"),"e"),t=t.replace(new RegExp("[ìíîï]","g"),"i"),t=t.replace(new RegExp("ñ","g"),"n"),t=t.replace(new RegExp("[òóôõö]","g"),"o"),t=t.replace(new RegExp("œ","g"),"oe"),t=t.replace(new RegExp("[ùúûü]","g"),"u"),t=t.replace(new RegExp("[ýÿ]","g"),"y")},WinJSContrib.Utils.removePageFromHistory=function(n){var t=[];WinJS.Navigation.history&&WinJS.Navigation.history.backStack&&WinJS.Navigation.history.backStack.length&&WinJS.Navigation.history.backStack.forEach(function(i){i.location!==n&&t.push(i)}),WinJS.Navigation.history.backStack=t},WinJSContrib.Utils.pad2=function(n){return(10>n?"0":"")+n},WinJSContrib.Utils.ellipsisizeString=function(n,t,i){if(!n)return"";var e=n.length>t,r=e?n.substr(0,t-1):n;return r=i&&e?r.substr(0,r.lastIndexOf(" ")):r,e?r+"...":r},WinJSContrib.Utils.guid=function(){var n=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?i:7&i|8).toString(16)});return t},WinJSContrib.Utils.inherit=function(n,t){if(n&&n.parentElement)for(var i=n.parentElement;i;){if(i.winControl&&void 0!=i.winControl[t])return i.winControl[t];i=i.parentElement}},WinJSContrib.Utils.moveChilds=function(n,t){for(var i=[],e=0;e<n.children.length;e++)i.push(n.children[e]);i.forEach(function(n){t.appendChild(n)})},WinJSContrib.Utils.getParent=function(n,t){for(var i=t.parentNode;i;){if(i[n]&&i.winControl)return i.winControl;i=i.parentNode}},WinJSContrib.Utils.getParentControlByClass=function(n,t){for(var i=t.parentNode;i;){if(i.classList&&i.classList.contains(n)&&i.winControl)return i.winControl;i=i.parentNode}},WinJSContrib.Utils.getParentPage=function(n){return WinJSContrib.Utils.getParent("mcnPage",n)},WinJSContrib.Utils.getScopeControl=function(n){for(var t=n.parentNode;t;){if(t.msParentSelectorScope){var i=t.parentNode;if(i){var e=i.winControl;if(e)return e}}t=t.parentNode}},WinJSContrib.Utils.getTemplate=function(n){if(n){var t=typeof n;if("string"==t)return new WinJS.Binding.Template(null,{href:n});if("function"==t)return{render:function(t,i){var e=n(t,i);return WinJS.Promise.as(e)}};if(n.winControl)return n.winControl;if(n.render)return n}},WinJSContrib.Utils.resolveMethod=function(n,t){var i=WinJSContrib.Utils.resolveValue(n,t);return i&&"function"==typeof i?i:void 0},WinJSContrib.Utils.readValue=function(n,t){var i=WinJSContrib.Utils.resolveValue(n,t);return i?"function"==typeof i?i(n):i:void 0},WinJSContrib.Utils.resolveValue=function(n,t){var i,e,r;if(0==t.indexOf("page:")){if(i=t.substr(5),WinJSContrib.Utils.getParentPage&&(e=WinJSContrib.Utils.getParentPage(n)),!e&&WinJSContrib.UI.Application.navigator&&(e=WinJSContrib.UI.Application.navigator.pageControl),!e)return;r=WinJSContrib.Utils.readProperty(e,i),r&&"function"==typeof r&&(r=r.bind(e))}else 0==t.indexOf("ctrl:")?(i=t.substr(5),e=WinJSContrib.Utils.getScopeControl(n),r=WinJSContrib.Utils.readProperty(e,i),r&&"function"==typeof r&&(r=r.bind(e))):(i=t,e=WinJSContrib.Utils.getScopeControl(n),r=WinJSContrib.Utils.readProperty(window,i));return r},WinJSContrib.Utils.hasValue=function(n){return"undefined"!=typeof n&&null!==n},WinJSContrib.Utils.formatXHRError=function(n){return"{0} - {1}: {2}".format(n.status,n.statusText,n.responseText)},WinJSContrib.Utils.unwrapJoinError=function(n){return function(t){for(var i=null,e=0;e<t.length;e++){var r=t[e];if("undefined"!=typeof r){i=r;break}}return n(i)}},WinJSContrib.Utils.inject=function(n,t){if(t)for(var i in t)n[i]=t[i]},WinJSContrib.UI.Pages.defaultFragmentMixins=[{$:function(n){return $(n,this.element||this._element)},q:function(n){return this.element.querySelector(n)},qAll:function(n){var t=this.element.querySelectorAll(n);t&&!t.forEach&&(t.forEach=function(n){for(var i=0;i<t.length;i++)n(t[i],i)})},eventTracker:{get:function(){return this._eventTracker||(this._eventTracker=new WinJSContrib.UI.EventTracker),this._eventTracker}},promises:{get:function(){return this._promises||(this._promises=[]),this._promises}},addPromise:function(n){return this.promises.push(n),n},cancelPromises:function(){var n=this;if(n.promises)for(var t=0;t<n.promises.length;t++)n.promises[t]&&n.promises[t].cancel()}}],WinJSContrib.UI.Pages.define=function(n,t){var i=WinJS.UI.Pages.define(n,t);return WinJSContrib.UI.Pages.fragmentMixin(i),i},WinJSContrib.UI.Pages.fragmentMixin=function(n){var t=n.prototype;if(!n.winJSContrib){if(n.winJSContrib=!0,WinJSContrib.UI.Pages.defaultFragmentMixins.forEach(function(t){WinJS.Class.mix(n,t)}),!t.__wLoad){t.__wLoad=t.load,t.load=function(){return WinJS.Promise.as(this.__wLoad.apply(this,arguments)).then(function(n){return t.__wInit||e(t),n})};var e=function(n){n.__wDispose=n.dispose,n.__wInit=n.init,n.__wProcess=n.process,n.__wProcessed=n.processed,n.__wRender=n.render,n.__wReady=n.ready,n.__wError=n.error,n.__wUpdateLayout=n.updateLayout,n.init=function(n){return n.classList.add("mcn-fragment"),n.classList.add("mcn-layout-ctrl"),n.style.display&&(this._initialDisplay=n.style.display),n.style.display="hidden",this.__wInit.apply(this,arguments)},n.process=function(){var n=this,t=arguments;return WinJS.Promise.as(n.__wProcess.apply(n,t))},n.processed=function(n,t){var e=this,r=arguments;return WinJSContrib.UI.bindMembers(n,e),e.prepareDataPromise.then(function(){return i(e,n,"prepare",[n,t],null,e.prepare)}).then(function(){return n.style.display=e._initialDisplay||"",WinJS.Promise.timeout()}).then(function(){return e.onbeforelayout?e.onbeforelayout(n,t):void 0}).then(function(){return i(e,n,"pageLayout",[n,t],null,e.pageLayout)}).then(function(){return e.onafterlayout?e.onafterlayout(n,t):void 0}).then(function(){return WinJS.Promise.as(e.__wProcessed.apply(e,r))})},n.render=function(n,t){var i=this,e=arguments;return i.prepareDataPromise=i.prepareData?WinJS.Promise.as(i.prepareData(n,t)):WinJS.Promise.wrap(),WinJS.Promise.as(i.__wRender.apply(i,e))},n.ready=function(n,t){var e=this;return WinJSContrib.UI.bindActions(n,this),WinJS.Promise.as(e.__wReady.apply(e,arguments)).then(function(){return e.onafterready?e.onafterready(n,t):void 0}).then(function(){return i(e,n,"pageReady",[n,t])}).then(function(){return e.enterPageAnimation?WinJS.Promise.as(e.enterPageAnimation(n,t)):void 0}).then(function(){return i(e,n,"contentReady",[n,t],null,e.contentReady)})},n.dispose=function(){$(".tap",this.element).untap(),this.eventTracker&&(this.eventTracker.dispose(),this._eventTracker=null),this.promises&&this.cancelPromises&&(this.cancelPromises(),this._promises=[]),this.__wDispose&&this.__wDispose(this)},n.updateLayout=function(){var n=this,t=arguments,e=WinJS.Promise.wrap();return n.__wUpdateLayout&&(e=WinJS.Promise.as(n.__wUpdateLayout.apply(n,t))),e.then(function(){return i(n,n.element,"updateLayout",t)})}}}return n}},WinJSContrib.UI.renderFragment=function(n,t,i,e){e=e||{};var r=document.createElement("div");r.setAttribute("dir",window.getComputedStyle(r,null).direction),r.style.opacity="0",n.appendChild(r);var o=null,a=WinJS.UI.Pages.get(t);WinJSContrib.UI.Pages.fragmentMixin(a);var s=new a(r,i,null,o);return i&&i.injectToPage&&WinJSContrib.Utils.inject(s,i.injectToPage),s.navigationState={location:t,state:i},e.onfragmentinit&&e.onfragmentinit(s),e.onafterlayout&&(s.onafterlayout=e.onafterlayout),e.onafterready&&(s.onafterready=e.onafterready),e.enterPage&&(s._enterAnimation=s.enterPageAnimation?s.enterPageAnimation:e.enterPage,s.enterPageAnimation=function(){var n=this,t=null;return t=n&&n.getAnimationElements?n.getAnimationElements(!1):n.element,t?n._enterAnimation(t):void 0}),e.closeOldPagePromise&&(s._beforelayoutPromise=e.closeOldPagePromise,s.onbeforelayout=function(){return this._beforelayoutPromise}),s.renderComplete.then(function(){return WinJSContrib.UI.disableAutoResources?void 0:WinJS.Resources.processAll(r)}).then(function(){r.style.opacity=""})},WinJSContrib.UI.MediaTrigger=WinJS.Class.mix(WinJS.Class.define(function(n,t){var i=this;i.queries=[],i.linkedControl=t;for(var e in n){var r=n[e];r.query&&i.registerMediaEvent(e,r.query,r)}},{dispose:function(){var n=this;n.linkedControl=null,this.queries.forEach(function(n){n.dispose()})},registerMediaEvent:function(n,t,i){var e=this,r=window.matchMedia(t),t={name:n,query:t,data:i,mq:r},o=function(n){n.matches&&e._mediaEvent(n,t)};r.addListener(o),t.dispose=function(){r.removeListener(o)},e.queries.push(t)},_mediaEvent:function(n,t){var i=this;i.linkedControl&&WinJS.UI.setOptions(i.linkedControl,t.data),i.dispatchEvent("media",t)},check:function(){var n=this;n.queries.forEach(function(t){var i=window.matchMedia(t.query);i.matches&&n._mediaEvent({matches:!0},t)})}}),WinJS.Utilities.eventMixin),WinJSContrib.UI.registerNavigationEvents=function(n,t){function i(n){var t=new WinJS.Promise(function(){});n.detail.setPromise(t),t.cancel()}var e=n,r=[];n.navLocks=n.navLocks||[],n.navLocks.isActive=!0;for(var o=function(i){n.navLocks&&0!=n.navLocks.length||t.bind(n)(i)},a=document.querySelectorAll(".mcn-navigation-ctrl"),s=0;s<a.length;s++){var e=a[s].winControl;e&&e!=n&&(e.navLocks=e.navLocks||[],e.navLocks.isActive&&(!e.navLocks.length||e.navLocks.indexOf(n)<0)&&(e.navLocks.push(n),r.push(e)))}return WinJS.Navigation.addEventListener("beforenavigate",i),window.Windows&&window.Windows.Phone?Windows.Phone.UI.Input.HardwareButtons.addEventListener("backpressed",o):document.addEventListener("backbutton",o),WinJSContrib.UI.Application&&WinJSContrib.UI.Application.navigator&&WinJSContrib.UI.Application.navigator.addLock(),function(){WinJSContrib.UI.Application&&WinJSContrib.UI.Application.navigator&&WinJSContrib.UI.Application.navigator.removeLock(),n.navLocks.isActive=!1,r.forEach(function(t){var i=t.navLocks.indexOf(n);i>=0&&t.navLocks.splice(i,1)}),WinJS.Navigation.removeEventListener("beforenavigate",i),window.Windows&&window.Windows.Phone?Windows.Phone.UI.Input.HardwareButtons.removeEventListener("backpressed",o):document.removeEventListener("backbutton",o)}}}(WinJSContrib);